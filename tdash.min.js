const HTMLParsedElement=(()=>{const e="DOMContentLoaded",t=new WeakMap,a=[],n=e=>{do{if(e.nextSibling)return!0}while(e=e.parentNode);return!1},s=()=>{a.splice(0).forEach(e=>{!0!==t.get(e[0])&&(t.set(e[0],!0),e[0][e[1]]())})};document.addEventListener(e,s);class l extends HTMLElement{static withParsedCallback(l,i="parsed"){const{prototype:r}=l,{connectedCallback:o}=r,c=i+"Callback",u=(t,a,n,s)=>{a.disconnect(),n.removeEventListener(e,s),d(t)},d=e=>{a.length||requestAnimationFrame(s),a.push([e,c])};return Object.defineProperties(r,{connectedCallback:{configurable:!0,value(){if(o&&o.apply(this,arguments),c in this&&!t.has(this)){const a=this,{ownerDocument:s}=a;if(t.set(a,!1),"complete"===s.readyState||n(a))d(a);else{const t=()=>u(a,l,s,t);s.addEventListener(e,t);const l=new MutationObserver(()=>{n(a)&&u(a,l,s,t)});l.observe(a.parentNode,{childList:!0,subtree:!0})}}}},[i]:{configurable:!0,get(){return!0===t.get(this)}}}),l}}return l.withParsedCallback(l)})(),variablePattern=/{([^}]+)}/g;class TDash{constructor({defaultLang:e,fallback:t,warn:a}){this.languages={},this.defaultLang=e||"en",this.fallback=t||"key",this.warn=a||!1,document.documentElement.lang=this.defaultLang,this.observer=new MutationObserver(e=>{e.forEach(e=>{"attributes"===e.type&&"lang"===e.attributeName&&e.oldValue!==document.documentElement.lang&&this.updateLang()})})}async addLang(e,t){let a=await fetch(t);this.languages[e]=await a.json()}async interpolation(e){let t=e,a=t.match(variablePattern)||[];for(let e=0;e<a.length;e++)t=t.replace(a[e],window[a[e].substring(1,a[e].length-1)]);return t}async translate(e){return e in this.languages[document.documentElement.lang]?await this.interpolation(this.languages[document.documentElement.lang][e]):"default"===this.fallback&&e in this.languages[this.defaultLang]?(this.warn&&console.warn(`'${e}' could not be found in translation files. Falling back to default language.`),await this.interpolation(this.languages[this.defaultLang][e])):(this.warn&&console.warn(`'${e}' could not be found in translation files. Falling back to key.`),e)}init(){var e=setInterval(()=>{if(Object.keys(this.languages).length>0)return customElements.define("t-",TDashElement),clearInterval(e),void this.observer.observe(document.documentElement,{attributes:!0,attributeOldValue:!0})},100)}updateLang(){var e=new Event("updateLang");document.querySelectorAll("t-").forEach(t=>t.dispatchEvent(e))}}class TDashElement extends HTMLParsedElement{constructor(){super(),this.addEventListener("updateLang",function(e){this.updateLang()})}parsedCallback(){this.key=this.innerHTML,this.updateLang()}async updateLang(){this.innerHTML=await tdash.translate(this.key)}}